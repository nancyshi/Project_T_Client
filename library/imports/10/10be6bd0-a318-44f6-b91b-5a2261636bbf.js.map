{"version":3,"sources":["../../../../assets/scripts/assets/scripts/dataMgr.js"],"names":["dataMgr","cc","Class","properties","playerData","get","_playerData","set","value","onPlayerDataUpdated","updatePlayerDataFromServer","playerId","ip","port","suffix","networkMgr","require","self","successCallBack","xhr","response","responseText","JSON","parse","type","message","stringify","sendMessage","log","commitPlayerDataToServer","shareDataMgr","module","exports"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA,IAAIA,UAAUC,GAAGC,KAAH,CAAS;;AAGnBC,gBAAY;;AAERC,oBAAY;AACRC,eADQ,iBACF;AACF,uBAAO,KAAKC,WAAZ;AACH,aAHO;AAIRC,eAJQ,eAIJC,KAJI,EAIG;AACP,qBAAKF,WAAL,GAAmBE,KAAnB;AACA,qBAAKC,mBAAL;AACA;AACH;AARO;;AAFJ,KAHO;;AAkBnBC,8BAlBmB,sCAkBQC,QAlBR,EAkBkB;AACjC,YAAIC,KAAK,WAAT;AACA,YAAIC,OAAO,IAAX;AACA,YAAIC,SAAS,MAAb;AACA,YAAIC,aAAaC,QAAQ,YAAR,CAAjB;AACA,YAAIC,OAAO,IAAX;AACA,YAAIC,kBAAkB,SAAlBA,eAAkB,CAASC,GAAT,EAAc;AAChC,gBAAIC,WAAWD,IAAIE,YAAnB;AACAD,uBAAWE,KAAKC,KAAL,CAAWH,QAAX,CAAX;;AAEA,gBAAIA,SAASI,IAAT,IAAiB,SAArB,EAAgC;AAC5BP,qBAAKb,UAAL,GAAkBgB,SAAShB,UAA3B;AACH,aAFD,MAGK;AACD;AACH;AACJ,SAVD;AAWA,YAAIqB,UAAU;AACV,wBAAYd,QADF;AAEV,2BAAe;AAFL,SAAd;AAIAc,kBAAUH,KAAKI,SAAL,CAAeD,OAAf,CAAV;AACAV,mBAAWY,WAAX,CAAuBF,OAAvB,EAA+BZ,IAA/B,EAAoCD,EAApC,EAAuCE,MAAvC,EAA8CI,eAA9C;AACH,KAzCkB;AA0CnBT,uBA1CmB,iCA0CI;AACnBR,WAAG2B,GAAH,CAAO,wBAAwBN,KAAKI,SAAL,CAAe,KAAKtB,UAApB,CAA/B;AACH,KA5CkB;AA8CnByB,4BA9CmB,sCA8CQ,CAE1B;AAhDkB,CAAT,CAAd;;AAmDA,IAAIC,eAAe,IAAI9B,OAAJ,EAAnB;AACA+B,OAAOC,OAAP,GAAiBF,YAAjB","file":"dataMgr.js","sourceRoot":"../../../../assets/scripts","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\nvar dataMgr = cc.Class({\n    \n\n    properties: {\n\n        playerData: {\n            get() {\n                return this._playerData\n            },\n            set(value) {\n                this._playerData = value\n                this.onPlayerDataUpdated()\n                //do something else\n            }\n        }\n        \n    },\n\n    updatePlayerDataFromServer(playerId) {\n        var ip = \"127.0.0.1\"\n        var port = 8888\n        var suffix = \"data\"\n        var networkMgr = require(\"networkMgr\")\n        var self = this\n        var successCallBack = function(xhr) {\n            var response = xhr.responseText\n            response = JSON.parse(response)\n            \n            if (response.type == \"success\") {\n                self.playerData = response.playerData\n            }\n            else {\n                //do something for erros\n            }\n        }\n        var message = {\n            \"playerId\": playerId,\n            \"requestType\": \"query\"\n        }\n        message = JSON.stringify(message)\n        networkMgr.sendMessage(message,port,ip,suffix,successCallBack)\n    },\n    onPlayerDataUpdated () {\n        cc.log(\"now player data is \" + JSON.stringify(this.playerData))\n    },\n\n    commitPlayerDataToServer() {\n        \n    }\n});\n\nvar shareDataMgr = new dataMgr()\nmodule.exports = shareDataMgr\n"]}