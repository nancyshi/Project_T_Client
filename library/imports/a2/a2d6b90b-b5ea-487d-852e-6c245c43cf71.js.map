{"version":3,"sources":["../../../../../assets/scripts/towerDefens/assets/scripts/towerDefens/towerAreaMgr.js"],"names":["cc","Class","extends","Component","properties","buildUIPrefab","Prefab","isUIShowed","buildUI","get","_buildUI","set","value","setupButtons","start","onClick","uiNode","instantiate","scale","node","addChild","tween","to","removeUI","self","call","removeFromParent","children","buttons","index","childNode","log","name","getComponent","Button","push","oneButton","toString","on","onButtonClick","button","buttonIndex","parseInt","towerPrefab","find","testTowerPrefab","tower","x","y"],"mappings":";;;;;;AAAA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEAA,GAAGC,KAAH,CAAS;AACLC,aAASF,GAAGG,SADP;;AAGLC,gBAAY;AACR;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACAC,uBAAeL,GAAGM,MAhBV;AAiBRC,oBAAY,KAjBJ;AAkBRC,iBAAS;AACLC,eADK,iBACC;AACF,uBAAO,KAAKC,QAAZ;AACH,aAHI;AAILC,eAJK,eAIDC,KAJC,EAIM;AACP,qBAAKF,QAAL,GAAgBE,KAAhB;AACA,oBAAIA,SAAS,IAAb,EAAmB;AACf;AACH;AACD,qBAAKC,YAAL;AACH;AAVI;;AAlBD,KAHP;;AAoCL;;AAEA;;AAEAC,SAxCK,mBAwCI,CAER,CA1CI;;;AA4CL;AACAC,WA7CK,qBA6CK;AACN,YAAI,KAAKP,OAAL,IAAgB,IAApB,EAA0B;AACtB;AACH;AACD,YAAIQ,SAAShB,GAAGiB,WAAH,CAAe,KAAKZ,aAApB,CAAb;AACA,aAAKG,OAAL,GAAeQ,MAAf;AACAA,eAAOE,KAAP,GAAe,CAAf;AACA,aAAKC,IAAL,CAAUC,QAAV,CAAmBJ,MAAnB;AACAhB,WAAGqB,KAAH,CAASL,MAAT,EACKM,EADL,CACQ,GADR,EACY,EAACJ,OAAO,CAAR,EADZ,EAEKJ,KAFL;AAIH,KAzDI;AA2DLS,YA3DK,sBA2DM;AACP,YAAI,KAAKf,OAAL,IAAgB,IAApB,EAA0B;AACtB;AACH;AACD,YAAIgB,OAAO,IAAX;AACAxB,WAAGqB,KAAH,CAAS,KAAKb,OAAd,EACKc,EADL,CACQ,GADR,EACY,EAACJ,OAAO,CAAR,EADZ,EAEKO,IAFL,CAEU,YAAU;AACZD,iBAAKhB,OAAL,CAAakB,gBAAb;AACAF,iBAAKhB,OAAL,GAAe,IAAf;AACH,SALL,EAMKM,KANL;AAOH,KAvEI;AAyELD,gBAzEK,0BAyEU;AACX,YAAIc,WAAW,KAAKnB,OAAL,CAAamB,QAA5B;AACA,YAAIC,UAAU,EAAd;AACA,aAAK,IAAIC,KAAT,IAAkBF,QAAlB,EAA4B;AACxB,gBAAIG,YAAYH,SAASE,KAAT,CAAhB;AACA7B,eAAG+B,GAAH,CAAOD,UAAUE,IAAjB;AACA,gBAAIF,UAAUG,YAAV,CAAuBjC,GAAGkC,MAA1B,KAAqC,IAAzC,EAA+C;AAC3CN,wBAAQO,IAAR,CAAaL,SAAb;AACH;AACJ;AACD,aAAK,IAAID,KAAT,IAAkBD,OAAlB,EAA2B;AACvB,gBAAIQ,YAAYR,QAAQC,KAAR,CAAhB;AACAO,sBAAUJ,IAAV,GAAiBH,MAAMQ,QAAN,EAAjB;AACAD,sBAAUE,EAAV,CAAa,OAAb,EAAqB,KAAKC,aAA1B,EAAwC,IAAxC;AACH;AACJ,KAxFI;AA0FLA,iBA1FK,yBA0FSC,MA1FT,EA0FiB;AAClB,aAAKjB,QAAL;AACA,YAAIkB,cAAcC,SAASF,OAAOrB,IAAP,CAAYa,IAArB,CAAlB;AACA,YAAIW,cAAc3C,GAAG4C,IAAH,CAAQ,oBAAR,EAA8BX,YAA9B,CAA2C,SAA3C,EAAsDY,eAAxE;AACA,YAAIC,QAAQ9C,GAAGiB,WAAH,CAAe0B,WAAf,CAAZ;AACAG,cAAMC,CAAN,GAAU,KAAK5B,IAAL,CAAU4B,CAApB;AACAD,cAAME,CAAN,GAAU,KAAK7B,IAAL,CAAU6B,CAApB;AACAhD,WAAG4C,IAAH,CAAQ,QAAR,EAAkBxB,QAAlB,CAA2B0B,KAA3B;AACA,aAAK3B,IAAL,CAAUO,gBAAV;AACH;AAnGI,CAAT","file":"towerAreaMgr.js","sourceRoot":"../../../../../assets/scripts/towerDefens","sourcesContent":["// Learn cc.Class:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/class.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/class.html\n// Learn Attribute:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/reference/attributes.html\n//  - [English] http://docs.cocos2d-x.org/creator/manual/en/scripting/reference/attributes.html\n// Learn life-cycle callbacks:\n//  - [Chinese] https://docs.cocos.com/creator/manual/zh/scripting/life-cycle-callbacks.html\n//  - [English] https://www.cocos2d-x.org/docs/creator/manual/en/scripting/life-cycle-callbacks.html\n\ncc.Class({\n    extends: cc.Component,\n\n    properties: {\n        // foo: {\n        //     // ATTRIBUTES:\n        //     default: null,        // The default value will be used only when the component attaching\n        //                           // to a node for the first time\n        //     type: cc.SpriteFrame, // optional, default is typeof default\n        //     serializable: true,   // optional, default is true\n        // },\n        // bar: {\n        //     get () {\n        //         return this._bar;\n        //     },\n        //     set (value) {\n        //         this._bar = value;\n        //     }\n        // },\n        buildUIPrefab: cc.Prefab,\n        isUIShowed: false,\n        buildUI: {\n            get() {\n                return this._buildUI\n            },\n            set(value) {\n                this._buildUI = value\n                if (value == null) {\n                    return\n                }\n                this.setupButtons()\n            }\n        },\n\n    },\n\n    // LIFE-CYCLE CALLBACKS:\n\n    // onLoad () {},\n\n    start () {\n\n    },\n\n    // update (dt) {},\n    onClick() {\n        if (this.buildUI != null) {\n            return\n        }\n        var uiNode = cc.instantiate(this.buildUIPrefab)\n        this.buildUI = uiNode\n        uiNode.scale = 0\n        this.node.addChild(uiNode)\n        cc.tween(uiNode)\n            .to(0.2,{scale: 1})\n            .start()\n\n    },\n\n    removeUI() {\n        if (this.buildUI == null) {\n            return\n        }\n        var self = this\n        cc.tween(this.buildUI)\n            .to(0.2,{scale: 0})\n            .call(function(){\n                self.buildUI.removeFromParent()\n                self.buildUI = null\n            })\n            .start()\n    },\n\n    setupButtons() {\n        var children = this.buildUI.children\n        var buttons = []\n        for (var index in children) {\n            var childNode = children[index]\n            cc.log(childNode.name)\n            if (childNode.getComponent(cc.Button) != null) {\n                buttons.push(childNode)\n            }\n        }\n        for (var index in buttons) {\n            var oneButton = buttons[index]\n            oneButton.name = index.toString()\n            oneButton.on(\"click\",this.onButtonClick,this)\n        }\n    },\n\n    onButtonClick(button) {\n        this.removeUI()\n        var buttonIndex = parseInt(button.node.name)\n        var towerPrefab = cc.find(\"Canvas/gameMgrNode\").getComponent(\"gameMgr\").testTowerPrefab\n        var tower = cc.instantiate(towerPrefab)\n        tower.x = this.node.x\n        tower.y = this.node.y\n        cc.find(\"Canvas\").addChild(tower)\n        this.node.removeFromParent()\n    }\n});\n"]}